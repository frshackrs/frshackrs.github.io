<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Server 1</title>
        <link rel="stylesheet" href="https://frshackrs.github.io/kumpulanstyle.css">
</head>
<body class="gambarlosi">

	
	<div class="mobile-position">
              <nav class="navigation">
                  <div class="theme-switch-wrapper">
                      <label class="theme-switch" for="checkbox">
                          <input type="checkbox" id="checkbox">
                          <div class="mode-container">
				  <i class="gg-sun" onclick="kontol()"></i>
                              <i class="gg-moon" onclick="asu()" ></i>
                          </div>
                      </label>
                  </div>
              </nav>
          </div>

<iframe src="https://ferri-shallahuddin.000webhostapp.com/serverphp.html" width="300px" border="1px" height="300px"></iframe>
<script type="text/javascript">
	// now send msg to server 2 using iframe contentwindow
    window.addEventListener("load",function(){
 let server_name = localStorage.getItem("name")
	let frame  = document.getElementsByTagName('iframe')[0];
	frame.contentWindow.postMessage("Msg from server 1 localStorage data is "+server_name,"*");
	window.addEventListener("message",kontol)
	    window.addEventListener("message",asu)
    })


// add receiver in server1


// so finally we are able to share msg b/w teo cross origin servers now lets share localstorage data instead of messages
	function server1Receiver(e)
	{
		// e.data contain "localstorage data sent from server2" so we are able to access server2 localstorage here
if(localStorage.getItem("theme")=="dark") {
	console.log("KONTOL",e.data,e.origin)
} else {
	console.log("ASU",e.data,e.origin)
}
   
		
		// if(e.origin == "http://localhost:8000")
		// {
		console.log(e.origin,e.data)

		// lets send back a msg to server1

		// e.target.postMessage("msg from server 2","*")

		// }
	}
	
	function kontol(){
	localStorage.setItem("DD","KONTOL")
	}
	
	function asu(){
	localStorage.setItem("DD","ASU")
	}

</script>
	
	<script src="https://frshackrs.github.io/theme-change.js"></script>
</body>
</html>
